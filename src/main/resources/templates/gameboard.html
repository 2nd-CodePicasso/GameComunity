<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²Œì„ ê²Œì‹œíŒ ëª©ë¡</title>
  <style>
    /* ê³µí†µ ìŠ¤íƒ€ì¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', 'Apple SD Gothic Neo', sans-serif;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* ëª¨ë“œ í† ê¸€ ìŠ¤ìœ„ì¹˜ */
    .device-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background-color: #495057;
      color: white;
      border-radius: 8px;
      display: flex;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .device-toggle button {
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      background: none;
      color: rgba(255,255,255,0.6);
      font-weight: 500;
      font-size: 14px;
    }

    .device-toggle button.active {
      background-color: #343a40;
      color: white;
    }

    /* ëª¨ë°”ì¼ ì»¨í…Œì´ë„ˆ */
    .mobile-container {
      width: 390px;
      height: 670px;
      margin: 40px auto;
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
      position: relative;
      display: none;
    }

    /* ë°ìŠ¤í¬íƒ‘ ì»¨í…Œì´ë„ˆ */
    .desktop-container {
      width: 100%;
      max-width: 1200px;
      margin: 40px auto;
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
      position: relative;
      display: block;
    }

    /* ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
    .mobile-content {
      position: relative;
      height: 100%;
      background-color: #f1f3f5;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
    }

    .mobile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background-color: #fff;
      border-bottom: 1px solid #e9ecef;
    }

    .mobile-back-button {
      display: flex;
      align-items: center;
      font-size: 14px;
      color: #495057;
      cursor: pointer;
    }

    .mobile-header-title {
      font-size: 18px;
      font-weight: 600;
      color: #212529;
    }

    .mobile-page-title {
      padding: 20px 16px;
      font-size: 18px;
      font-weight: 600;
      color: #212529;
      background-color: #dee2e6;
    }

    .mobile-game-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 1px;
      background-color: #e9ecef;
      flex-grow: 1;
    }

    .mobile-game-item {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 24px 0;
      background-color: #fff;
      text-align: center;
      cursor: pointer;
      font-size: 15px;
      color: #495057;
      transition: background-color 0.2s;
    }

    .mobile-game-item:hover {
      background-color: #f8f9fa;
    }

    .mobile-search-bar {
      padding: 16px;
      background-color: #fff;
      border-top: 1px solid #e9ecef;
    }

    .mobile-search-input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ced4da;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
    }

    /* ë°ìŠ¤í¬íƒ‘ ìŠ¤íƒ€ì¼ */
    .desktop-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      background-color: #339af0;
      color: white;
    }

    .desktop-logo {
      font-size: 24px;
      font-weight: 700;
    }

    .desktop-nav {
      display: flex;
      gap: 24px;
    }

    .desktop-nav a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background-color 0.2s;
    }

    .desktop-nav a:hover {
      background-color: rgba(255,255,255,0.2);
    }

    .desktop-layout {
      display: flex;
      background-color: #f8f9fa;
    }

    .desktop-sidebar {
      width: 280px;
      background-color: white;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .desktop-main {
      flex: 1;
      padding: 24px;
    }

    .desktop-search {
      margin-bottom: 24px;
    }

    .desktop-search-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #ced4da;
      border-radius: 8px;
      font-size: 16px;
    }

    .desktop-categories {
      margin-top: 24px;
      margin-bottom: 24px;
    }

    .desktop-category-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .desktop-category-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .desktop-category-item {
      padding: 12px 16px;
      border-radius: 8px;
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      cursor: pointer;
      transition: all 0.2s;
    }

    .desktop-category-item:hover {
      background-color: white;
      transform: translateY(-2px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .desktop-category-item.active {
      background-color: #339af0;
      color: white;
      border-color: #339af0;
    }

    .desktop-board-section {
      background-color: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      margin-bottom: 24px;
    }

    .desktop-board-header {
      padding: 16px 24px;
      background-color: #339af0;
      color: white;
      font-size: 18px;
      font-weight: 600;
    }

    .desktop-board-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      padding: 16px;
      gap: 16px;
    }

    .desktop-board-item {
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid #e9ecef;
    }

    .desktop-board-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background-color: white;
    }

    .desktop-popular-boards {
      background-color: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .desktop-popular-header {
      padding: 16px 24px;
      background-color: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
      font-size: 18px;
      font-weight: 600;
      color: #212529;
    }

    .desktop-popular-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      padding: 16px;
      gap: 16px;
    }

    .desktop-popular-item {
      display: flex;
      align-items: center;
      gap: 12px;
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid #e9ecef;
    }

    .desktop-popular-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      background-color: white;
    }

    .desktop-popular-icon {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      background-color: #339af0;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .desktop-popular-label {
      font-size: 15px;
      color: #495057;
    }
  </style>
</head>
<body>
<!-- ëª¨ë“œ í† ê¸€ ìŠ¤ìœ„ì¹˜ -->
<div class="device-toggle">
  <button class="active" id="desktopBtn">ë°ìŠ¤í¬íƒ‘</button>
  <button id="mobileBtn">ëª¨ë°”ì¼</button>
</div>

<!-- ëª¨ë°”ì¼ ì»¨í…Œì´ë„ˆ -->
<div class="mobile-container" id="mobileView">
  <div class="mobile-content">
    <!-- í—¤ë” -->
    <div class="mobile-header">
      <div class="mobile-back-button">â† ë’¤ë¡œê°€ê¸°</div>
      <div class="mobile-header-title">ê²Œì‹œíŒ</div>
      <div style="width: 70px;"></div> <!-- ê· í˜•ì„ ìœ„í•œ ë¹ˆ ê³µê°„ -->
    </div>

    <!-- í˜ì´ì§€ ì œëª© -->
    <div class="mobile-page-title">ìƒì„±ëœ ê²Œì„ ê²Œì‹œíŒ</div>

    <!-- ê²Œì„ ê·¸ë¦¬ë“œ -->
    <div class="mobile-game-grid">
      <div class="mobile-game-item">ë¡¤</div>
      <div class="mobile-game-item">ë°°ê·¸</div>
      <div class="mobile-game-item">ì˜¤ë²„ì›Œì¹˜</div>
      <div class="mobile-game-item">ë¡œìŠ¤íŠ¸ì•„í¬</div>
      <div class="mobile-game-item">ë¡¤ì§€ë¯¸</div>
      <div class="mobile-game-item">ë˜ì „ì•¤íŒŒì´íŒ…</div>
      <div class="mobile-game-item">ë©”ì´í”ŒìŠ¤í† ë¦¬</div>
      <div class="mobile-game-item">ë¦¬ë‹ˆì§€</div>
      <div class="mobile-game-item">ë””ì•„ë¸”ë¡œ4</div>
      <div class="mobile-game-item">í”¼íŒŒì˜¨ë¼ì¸4</div>
      <div class="mobile-game-item">ì„œë“ ì–´íƒ</div>
      <div class="mobile-game-item">ë°œë¡œë€íŠ¸</div>
    </div>

    <!-- ê²€ìƒ‰ ë°” -->
    <div class="mobile-search-bar">
      <input type="text" class="mobile-search-input" placeholder="ê²Œì„ ê²€ìƒ‰">
    </div>
  </div>
</div>

<!-- ë°ìŠ¤í¬íƒ‘ ì»¨í…Œì´ë„ˆ -->
<div class="desktop-container" id="desktopView">
  <!-- ë°ìŠ¤í¬íƒ‘ í—¤ë” -->
  <div class="desktop-header">
    <div class="desktop-logo">ê²Œì„ ê²Œì‹œíŒ</div>
    <div class="desktop-nav">
      <a href="/main/hi/game">í™ˆ</a>
      <a href="/gameboard/hi/game">ê²Œì‹œíŒ</a>
      <a href="/exchange/hi/game">ì•„ì´í…œ ê±°ë˜ì†Œ</a>
      <a href="#">ì±„íŒ…ë°©</a>
      <a href="#">ê³µì§€ì‚¬í•­</a>
    </div>
    <div class="desktop-actions">
    </div>
  </div>

  <!-- ë°ìŠ¤í¬íƒ‘ ë ˆì´ì•„ì›ƒ -->
  <div class="desktop-layout">
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="desktop-sidebar">
      <!-- ê²€ìƒ‰ ì˜ì—­ -->
      <div class="desktop-search">
        <input type="text" class="desktop-search-input" placeholder="ê²Œì„ ê²€ìƒ‰">
      </div>

      <!-- ì£¼ìš” ì¹´í…Œê³ ë¦¬ -->
      <div class="desktop-categories">
        <div class="desktop-category-title">ê²Œì„ ë¶„ë¥˜</div>
        <div class="desktop-category-list">
          <div class="desktop-category-item active">ì „ì²´</div>
          <div class="desktop-category-item">RPG</div>
          <div class="desktop-category-item">FPS</div>
          <div class="desktop-category-item">MOBA</div>
          <div class="desktop-category-item">ì „ëµ</div>
          <div class="desktop-category-item">ìŠ¤í¬ì¸ </div>
        </div>
      </div>

      <!-- ì¸ê¸° ê²Œì‹œíŒ -->
      <div class="desktop-categories">
        <div class="desktop-category-title">ì¸ê¸° ê²Œì‹œíŒ</div>
        <div class="desktop-category-list">
          <div class="desktop-category-item">ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ</div>
          <div class="desktop-category-item">ë°°í‹€ê·¸ë¼ìš´ë“œ</div>
          <div class="desktop-category-item">ì˜¤ë²„ì›Œì¹˜</div>
          <div class="desktop-category-item">ë¡œìŠ¤íŠ¸ì•„í¬</div>
          <div class="desktop-category-item">ë©”ì´í”ŒìŠ¤í† ë¦¬</div>
        </div>
      </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="desktop-main">
      <!-- ê²Œì„ ê²Œì‹œíŒ ì„¹ì…˜ -->
      <div class="desktop-board-section">
        <div class="desktop-board-header">
          ìƒì„±ëœ ê²Œì„ ê²Œì‹œíŒ
        </div>
        <div class="desktop-board-grid" id="gameBoardGrid">
          <div class="desktop-board-item">í¬íŠ¸ë‚˜ì´íŠ¸</div>
          <div class="desktop-board-item">ì—ì´í™ìŠ¤ ë ˆì „ë“œ</div>
        </div>
      </div>

      <!-- ì¸ê¸° ê²Œì‹œíŒ -->
      <div class="desktop-popular-boards">
        <div class="desktop-popular-header">
          ìµœê·¼ í™œë°œí•œ ê²Œì‹œíŒ
        </div>
        <div class="desktop-popular-grid">
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ë¡¤</div>
            <div class="desktop-popular-label">ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ</div>
          </div>
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ë°°</div>
            <div class="desktop-popular-label">ë°°í‹€ê·¸ë¼ìš´ë“œ</div>
          </div>
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ì˜¤</div>
            <div class="desktop-popular-label">ì˜¤ë²„ì›Œì¹˜ 2</div>
          </div>
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ë¡œ</div>
            <div class="desktop-popular-label">ë¡œìŠ¤íŠ¸ì•„í¬</div>
          </div>
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ë©”</div>
            <div class="desktop-popular-label">ë©”ì´í”ŒìŠ¤í† ë¦¬</div>
          </div>
          <div class="desktop-popular-item">
            <div class="desktop-popular-icon">ë””</div>
            <div class="desktop-popular-label">ë””ì•„ë¸”ë¡œ 4</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", async function () {
    console.log("ğŸ“¡ /games API ìš”ì²­ ì‹œì‘");

    try {
      const response = await fetch("/games", {
        method: "GET",
        headers: {
          "Content-Type": "application/json" // âœ… JSON í—¤ë” ì¶”ê°€
        }
      });

      console.log("ğŸ“¡ ì„œë²„ ì‘ë‹µ ìƒíƒœ ì½”ë“œ:", response.status);

      if (!response.ok) throw new Error("ğŸš¨ ì„œë²„ ì‘ë‹µ ì‹¤íŒ¨: " + response.status);

      const responseData = await response.json();
      console.log("ğŸ“¡ ì„œë²„ ì‘ë‹µ ë°ì´í„°:", responseData);

      // âœ… API ì‘ë‹µ êµ¬ì¡°ì—ì„œ gameResponses ë°°ì—´ ì¶”ì¶œ
      let games = responseData.data.gameResponses;

      // âœ… ImmutableCollections$ListN êµ¬ì¡° í•´ì œ
      if (Array.isArray(games) && games.length === 2 && Array.isArray(games[1])) {
        games = games[1]; // âœ… ì‹¤ì œ ê²Œì„ ë°°ì—´ë§Œ ì¶”ì¶œ
      } else {
        console.warn("ğŸš¨ gameResponses êµ¬ì¡°ê°€ ì˜ˆìƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤.", games);
        games = []; // âœ… ë¹„ì •ìƒì ì¸ ê²½ìš° ë¹ˆ ë°°ì—´ ì²˜ë¦¬
      }

      if (games.length === 0) {
        console.warn("âš ï¸ ê²Œì„ ëª©ë¡ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.");
      }

      // âœ… ê²Œì„ ë¦¬ìŠ¤íŠ¸ UIì— ì¶”ê°€
      const gameBoardGrid = document.getElementById("gameBoardGrid");
      gameBoardGrid.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

      games.forEach(game => {
        const gameItem = document.createElement("div");
        gameItem.classList.add("desktop-board-item");
        gameItem.textContent = game.gameTitle; // âœ… gameTitle ì‚¬ìš©
        gameBoardGrid.appendChild(gameItem);
      });

    } catch (error) {
      console.error("ğŸš¨ ê²Œì„ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
    }
  });
  // DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ì‹¤í–‰
  document.addEventListener('DOMContentLoaded', function() {
    // ìš”ì†Œ ì„ íƒ
    const mobileView = document.getElementById('mobileView');
    const desktopView = document.getElementById('desktopView');
    const desktopBtn = document.getElementById('desktopBtn');
    const mobileBtn = document.getElementById('mobileBtn');

    // ëª¨ë°”ì¼/ë°ìŠ¤í¬íƒ‘ í† ê¸€
    desktopBtn.addEventListener('click', function() {
      mobileView.style.display = 'none';
      desktopView.style.display = 'block';
      desktopBtn.classList.add('active');
      mobileBtn.classList.remove('active');
    });

    mobileBtn.addEventListener('click', function() {
      mobileView.style.display = 'block';
      desktopView.style.display = 'none';
      desktopBtn.classList.remove('active');
      mobileBtn.classList.add('active');
    });

    // ê²Œì„ í•­ëª© í´ë¦­ ì´ë²¤íŠ¸
    const gameItems = document.querySelectorAll('.mobile-game-item, .desktop-board-item, .desktop-popular-item, .desktop-category-item');
    gameItems.forEach(function(item) {
      item.addEventListener('click', function() {
        let gameName = item.textContent.trim();
        if (item.classList.contains('desktop-popular-item')) {
          gameName = item.querySelector('.desktop-popular-label').textContent.trim();
        }
        alert(gameName + ' ê²Œì‹œíŒìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ í˜ì´ì§€ ì´ë™ ì½”ë“œ ì‘ì„±
        // window.location.href = '/board/' + encodeURIComponent(gameName);
      });
    });

    // ì¹´í…Œê³ ë¦¬ í•­ëª© í´ë¦­ ì´ë²¤íŠ¸
    const categoryItems = document.querySelectorAll('.desktop-category-item');
    categoryItems.forEach(function(item) {
      item.addEventListener('click', function() {
        // í˜„ì¬ í™œì„±í™”ëœ í•­ëª©ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
        document.querySelector('.desktop-category-item.active').classList.remove('active');
        // í´ë¦­ëœ í•­ëª©ì— active í´ë˜ìŠ¤ ì¶”ê°€
        item.classList.add('active');
      });
    });
  });
</script>
</body>
</html>
